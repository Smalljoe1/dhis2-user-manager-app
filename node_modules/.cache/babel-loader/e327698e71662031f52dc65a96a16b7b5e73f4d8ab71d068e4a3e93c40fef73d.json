{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\nongu\\\\Documents\\\\Projects\\\\dhis2-user-manager\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef, useEffect, useCallback } from 'react';\nimport axios from 'axios';\nimport { FiUpload, FiDownload, FiPlay, FiSquare, FiSun, FiMoon, FiHelpCircle, FiUsers } from 'react-icons/fi';\nimport { convertCSVtoJSON } from './convertCSVtoJSON'; // Assumed external module\n\n// Configure axios defaults\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\naxios.defaults.timeout = 30000; // 30 second timeout\naxios.defaults.maxContentLength = 50 * 1024 * 1024; // 50MB\naxios.defaults.maxBodyLength = 50 * 1024 * 1024; // 50MB\n\nconst BASE_URL = process.env.REACT_APP_BASE_URL || \"https://emis.dhis2nigeria.org.ng/dhis/api\";\nconst HEADERS = {\n  'Content-Type': 'application/json',\n  'Authorization': `ApiToken ${process.env.REACT_APP_API_TOKEN}`\n};\n\n// Sample user data for download\nconst SAMPLE_USERS = [{\n  firstName: \"PVT\",\n  surname: \"Royal\",\n  username: 12020407,\n  password: \"Egor123@\",\n  userRoles: [{\n    id: \"KBkjSGFKSKI\"\n  }, {\n    id: \"oO6BBApzmHZ\"\n  }],\n  organisationUnits: [{\n    id: \"wRQIw3NMW29\"\n  }],\n  dataViewOrganisationUnits: [{\n    id: \"wRQIw3NMW29\"\n  }],\n  teiSearchOrganisationUnits: [{\n    id: \"wRQIw3NMW29\"\n  }],\n  userGroups: [{\n    id: \"U8WuGyxfFFp\"\n  }]\n}, {\n  firstName: \"PVT\",\n  surname: \"Dominion\",\n  username: 12020409,\n  password: \"Egor123@\",\n  userRoles: [{\n    id: \"KBkjSGFKSKI\"\n  }, {\n    id: \"oO6BBApzmHZ\"\n  }],\n  organisationUnits: [{\n    id: \"AVEyJypVCjJ\"\n  }],\n  dataViewOrganisationUnits: [{\n    id: \"AVEyJypVCjJ\"\n  }],\n  teiSearchOrganisationUnits: [{\n    id: \"AVEyJypVCjJ\"\n  }],\n  userGroups: [{\n    id: \"U8WuGyxfFFp\"\n  }]\n}];\nfunction App() {\n  _s();\n  // State declarations\n  const [users, setUsers] = useState([]);\n  const [log, setLog] = useState([]);\n  const [processing, setProcessing] = useState(false);\n  const [progress, setProgress] = useState(0);\n  const [exportedUsers, setExportedUsers] = useState([]);\n  const [usernameFilter, setUsernameFilter] = useState('');\n  const [orgUnitFilter, setOrgUnitFilter] = useState('');\n  const [theme, setTheme] = useState('dark');\n  const [currentPage, setCurrentPage] = useState(1);\n  const [activeTab, setActiveTab] = useState('import');\n  const [batchSize, setBatchSize] = useState(2);\n  const [connectionStatus, setConnectionStatus] = useState('checking...');\n  const [selectedColumns, setSelectedColumns] = useState(['id', 'name', 'username', 'userGroups', 'userRoles', 'lastLogin', 'schoolPath']);\n  const [showHelp, setShowHelp] = useState(false);\n  const shouldStop = useRef(false);\n  const logEndRef = useRef(null);\n  const usersPerPage = 100;\n  const availableColumns = [{\n    id: 'id',\n    label: 'ID'\n  }, {\n    id: 'name',\n    label: 'Name'\n  }, {\n    id: 'username',\n    label: 'Username'\n  }, {\n    id: 'userGroups',\n    label: 'Groups'\n  }, {\n    id: 'userRoles',\n    label: 'Roles'\n  }, {\n    id: 'lastLogin',\n    label: 'Last Login'\n  }, {\n    id: 'schoolPath',\n    label: 'School Path'\n  }, {\n    id: 'schoolUID',\n    label: 'School UID'\n  }];\n\n  // Append log with size limit\n  const appendLog = (message, type = 'info') => {\n    const timestamp = new Date().toLocaleTimeString();\n    setLog(prevLog => {\n      const newLog = [...prevLog, {\n        message,\n        type,\n        timestamp\n      }];\n      return newLog.slice(-100); // Keep last 100 entries\n    });\n  };\n\n  // Enhanced API request with retries\n  const apiRequest = useCallback(async (config, attempt = 1) => {\n    const maxRetries = 3;\n    const baseDelay = 1000;\n    try {\n      const response = await axios({\n        ...config,\n        timeout: 30000,\n        headers: {\n          ...HEADERS,\n          ...config.headers\n        }\n      });\n      return response;\n    } catch (error) {\n      if (attempt >= maxRetries) throw error;\n      const retryDelay = baseDelay * Math.pow(2, attempt - 1);\n      appendLog(`⚠️ Attempt ${attempt} failed, retrying in ${retryDelay / 1000}s...`, 'warning');\n      await new Promise(resolve => setTimeout(resolve, retryDelay));\n      return apiRequest(config, attempt + 1);\n    }\n  }, [appendLog]);\n\n  // Connection monitoring with retry\n  useEffect(() => {\n    let retries = 0;\n    const maxRetries = 3;\n    const checkConnection = async () => {\n      try {\n        await apiRequest({\n          method: 'get',\n          url: `${BASE_URL}/system/ping`\n        });\n        setConnectionStatus('connected');\n        retries = 0;\n      } catch {\n        retries++;\n        if (retries >= maxRetries) {\n          setConnectionStatus('disconnected');\n          appendLog('⚠️ Failed to connect to server after retries', 'warning');\n        } else {\n          setTimeout(checkConnection, 1000 * Math.pow(2, retries));\n        }\n      }\n    };\n    checkConnection();\n    const interval = setInterval(checkConnection, 30000);\n    return () => clearInterval(interval);\n  }, [apiRequest]);\n\n  // Auto-scroll log to bottom\n  useEffect(() => {\n    var _logEndRef$current;\n    (_logEndRef$current = logEndRef.current) === null || _logEndRef$current === void 0 ? void 0 : _logEndRef$current.scrollIntoView({\n      behavior: 'smooth'\n    });\n  }, [log]);\n\n  // File upload handler\n  const handleFileUpload = e => {\n    var _e$target$files;\n    const file = (_e$target$files = e.target.files) === null || _e$target$files === void 0 ? void 0 : _e$target$files[0];\n    if (!file) return;\n    const reader = new FileReader();\n    reader.onloadstart = () => appendLog('⏳ Loading user file...', 'info');\n    reader.onload = event => {\n      try {\n        if (file.name.endsWith('.csv')) {\n          const convertedUsers = convertCSVtoJSON(event.target.result);\n          if (convertedUsers) {\n            setUsers(convertedUsers);\n            appendLog(`✅ Loaded and converted ${convertedUsers.length} users from CSV`, 'success');\n          }\n        } else {\n          const data = JSON.parse(event.target.result);\n          if (!Array.isArray(data)) throw new Error('File should contain an array of users');\n          setUsers(data);\n          appendLog(`✅ Loaded ${data.length} users from JSON`, 'success');\n        }\n      } catch (error) {\n        appendLog(`❌ Error parsing file: ${error.message}`, 'error');\n      }\n    };\n    reader.onerror = () => appendLog('❌ Failed to read file', 'error');\n    reader.readAsText(file);\n  };\n\n  // Reusable download function\n  const downloadFile = (content, filename, mimeType) => {\n    try {\n      const blob = new Blob([content], {\n        type: mimeType\n      });\n      const link = document.createElement('a');\n      link.href = URL.createObjectURL(blob);\n      link.download = filename;\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n      appendLog(`✅ Downloaded ${filename}`, 'success');\n    } catch (error) {\n      appendLog(`❌ Download failed: ${error.message}`, 'error');\n    }\n  };\n\n  // Sample JSON download\n  const downloadSampleJson = () => {\n    downloadFile(JSON.stringify(SAMPLE_USERS, null, 2), 'dhis2_users_sample.json', 'application/json');\n  };\n\n  // Sample CSV download\n  const downloadSampleCSV = () => {\n    const headers = ['firstName', 'surname', 'username', 'password', 'userRoles', 'organisationUnits', 'dataViewOrganisationUnits', 'teiSearchOrganisationUnits', 'userGroups'].join(',');\n    const sampleRow = ['JSS', 'Com', '11010051', 'Abakaliki123@', '[{\"id\": \"KBkjSGFKSKI\"},{\"id\": \"oO6BBApzmHZ\"}]', '[{\"id\": \"wMcSLrAHchs\"}]', '[{\"id\": \"wMcSLrAHchs\"}]', '[{\"id\": \"wMcSLrAHchs\"}]', '[{\"id\": \"Ca67o1mgiPn\"}]'].map(field => `\"${field}\"`).join(',');\n    const csvContent = [headers, sampleRow].join('\\n');\n    downloadFile(csvContent, 'dhis2_users_template.csv', 'text/csv;charset=utf-8;');\n  };\n\n  // User validation\n  const validateUser = user => {\n    var _user$userRoles, _user$organisationUni;\n    if (!user.username) return 'Username is required';\n    if (!((_user$userRoles = user.userRoles) !== null && _user$userRoles !== void 0 && _user$userRoles.length)) return 'At least one user role is required';\n    if (!((_user$organisationUni = user.organisationUnits) !== null && _user$organisationUni !== void 0 && _user$organisationUni.length)) return 'At least one organization unit is required';\n    return null;\n  };\n\n  // User management functions\n  const getUserId = async username => {\n    try {\n      var _res$data$users, _res$data$users$;\n      const res = await apiRequest({\n        method: 'get',\n        url: `${BASE_URL}/users?filter=username:eq:${username}&fields=id`\n      });\n      return ((_res$data$users = res.data.users) === null || _res$data$users === void 0 ? void 0 : (_res$data$users$ = _res$data$users[0]) === null || _res$data$users$ === void 0 ? void 0 : _res$data$users$.id) || null;\n    } catch (error) {\n      appendLog(`⚠️ Error fetching user ID for ${username}: ${error.message}`, 'warning');\n      return null;\n    }\n  };\n  const updateUser = async (user, id) => {\n    try {\n      const payload = {\n        firstName: user.firstName,\n        surname: user.surname,\n        username: user.username,\n        userRoles: user.userRoles.map(role => ({\n          id: role.id\n        })),\n        organisationUnits: user.organisationUnits.map(ou => ({\n          id: ou.id\n        })),\n        dataViewOrganisationUnits: user.dataViewOrganisationUnits.map(ou => ({\n          id: ou.id\n        })),\n        teiSearchOrganisationUnits: user.teiSearchOrganisationUnits.map(ou => ({\n          id: ou.id\n        })),\n        userGroups: user.userGroups.map(group => ({\n          id: group.id\n        }))\n      };\n      await apiRequest({\n        method: 'put',\n        url: `${BASE_URL}/users/${id}`,\n        data: payload\n      });\n      appendLog(`🔄 Updated user: ${user.username}`, 'success');\n      return true;\n    } catch (error) {\n      var _error$response, _error$response$data;\n      appendLog(`❌ Error updating user ${user.username}: ${((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.message) || error.message}`, 'error');\n      return false;\n    }\n  };\n  const createUser = async user => {\n    try {\n      await apiRequest({\n        method: 'post',\n        url: `${BASE_URL}/users`,\n        data: user\n      });\n      appendLog(`🆕 Created user: ${user.username}`, 'success');\n      return true;\n    } catch (error) {\n      var _error$response2;\n      if (((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : _error$response2.status) === 409) {\n        const id = await getUserId(user.username);\n        if (id) {\n          appendLog(`⚠️ Conflict: Updating user ${user.username}`, 'warning');\n          return await updateUser(user, id);\n        } else {\n          appendLog(`❌ Conflict and ID not found: ${user.username}`, 'error');\n          return false;\n        }\n      }\n      appendLog(`❌ Error for ${user.username}: ${error.message}`, 'error');\n      return false;\n    }\n  };\n\n  // Process batch with parallel execution\n  const processBatch = async batch => {\n    const promises = batch.map(async user => {\n      try {\n        const id = await getUserId(user.username);\n        return id ? await updateUser(user, id) : await createUser(user);\n      } catch (error) {\n        appendLog(`❌ Failed to process ${user.username}: ${error.message}`, 'error');\n        return false;\n      }\n    });\n    return Promise.all(promises);\n  };\n\n  // Process users with validation\n  const processUsers = async () => {\n    const invalidUsers = users.filter(user => validateUser(user));\n    if (invalidUsers.length) {\n      appendLog(`⚠️ Invalid users detected: ${invalidUsers.length}`, 'warning');\n      return;\n    }\n    setProcessing(true);\n    shouldStop.current = false;\n    setProgress(0);\n    let successCount = 0;\n    let errorCount = 0;\n    const totalBatches = Math.ceil(users.length / batchSize);\n    appendLog(`🚀 Starting import of ${users.length} users (${totalBatches} batches)`, 'info');\n    for (let i = 0; i < users.length && !shouldStop.current; i += batchSize) {\n      const batch = users.slice(i, i + batchSize);\n      appendLog(`🔨 Processing batch ${Math.floor(i / batchSize) + 1}/${totalBatches}`, 'info');\n      const batchResults = await processBatch(batch);\n      successCount += batchResults.filter(Boolean).length;\n      errorCount += batchResults.filter(x => !x).length;\n      setProgress(Math.round((i + batchSize) / users.length * 100));\n      if (shouldStop.current) break;\n    }\n    appendLog(`🎉 Process ${shouldStop.current ? 'stopped' : 'completed'}. Success: ${successCount}, Errors: ${errorCount}`, errorCount > 0 ? 'warning' : 'success');\n    setProcessing(false);\n  };\n  const stopProcessing = () => {\n    shouldStop.current = true;\n    appendLog(\"⏹ Stopping process after current batch completes...\", 'warning');\n  };\n\n  // Export functions\n  const exportUsersToCSV = async () => {\n    appendLog(\"📦 Starting DHIS2 user export...\", 'info');\n    setProcessing(true);\n    try {\n      let seenIds = new Set();\n      let usersList = [];\n      let nextUrl = `${BASE_URL}/users.json?fields=id,name,username,userGroups[name],userRoles[name],lastLogin,organisationUnits[ancestors[name],name,id]&paging=true&pageSize=1000`;\n      while (nextUrl) {\n        const response = await apiRequest({\n          method: 'get',\n          url: nextUrl\n        });\n        if (response.status !== 200) break;\n        const data = response.data;\n        const users = data.users || [];\n        const pager = data.pager || {};\n        for (const user of users) {\n          var _user$userGroups, _user$userRoles2;\n          const uid = user.id;\n          if (!uid || seenIds.has(uid)) continue;\n          seenIds.add(uid);\n          const userGroups = ((_user$userGroups = user.userGroups) === null || _user$userGroups === void 0 ? void 0 : _user$userGroups.map(g => g.name).join(\"; \")) || \"\";\n          const userRoles = ((_user$userRoles2 = user.userRoles) === null || _user$userRoles2 === void 0 ? void 0 : _user$userRoles2.map(r => r.name).join(\"; \")) || \"\";\n          const lastLogin = user.lastLogin || \"\";\n          let schoolPaths = [];\n          let schoolUIDs = [];\n          (user.organisationUnits || []).forEach(ou => {\n            var _ou$ancestors;\n            if (((_ou$ancestors = ou.ancestors) === null || _ou$ancestors === void 0 ? void 0 : _ou$ancestors.length) === 4) {\n              const path = [...ou.ancestors.map(a => a.name), ou.name].join(\" > \");\n              schoolPaths.push(path);\n              schoolUIDs.push(ou.id || \"\");\n            }\n          });\n          usersList.push({\n            id: uid,\n            name: user.name || '',\n            username: user.username || '',\n            userGroups,\n            userRoles,\n            lastLogin,\n            schoolPath: schoolPaths.join(\" | \"),\n            schoolUID: schoolUIDs.join(\" | \")\n          });\n        }\n        appendLog(`✅ Page ${pager.page} fetched. Total: ${seenIds.size}`, 'success');\n        nextUrl = pager.nextPage || null;\n      }\n      setExportedUsers(usersList);\n      appendLog(`🎉 Export complete. Total users: ${seenIds.size}`, 'success');\n    } catch (error) {\n      appendLog(`❌ Export failed: ${error.message}`, 'error');\n    } finally {\n      setProcessing(false);\n    }\n  };\n  const exportFilteredUsers = (format = 'csv') => {\n    const filtered = exportedUsers.filter(u => u.username.toLowerCase().includes(usernameFilter.toLowerCase()) && u.schoolPath.toLowerCase().includes(orgUnitFilter.toLowerCase()));\n    if (filtered.length === 0) {\n      appendLog('⚠️ No users match your filters', 'warning');\n      return;\n    }\n    try {\n      let content, mimeType, extension;\n      if (format === 'csv') {\n        const headers = availableColumns.filter(col => selectedColumns.includes(col.id)).map(col => col.label);\n        const rows = filtered.map(user => selectedColumns.map(col => {\n          const value = user[col] || '';\n          return value.includes(',') ? `\"${value}\"` : value;\n        }).join(','));\n        content = [headers.join(','), ...rows].join('\\n');\n        mimeType = 'text/csv;charset=utf-8;';\n        extension = 'csv';\n      } else {\n        content = JSON.stringify(filtered, null, 2);\n        mimeType = 'application/json';\n        extension = 'json';\n      }\n      downloadFile(content, `dhis2_users_${new Date().toISOString().slice(0, 10)}.${extension}`, mimeType);\n    } catch (error) {\n      appendLog(`❌ Export error: ${error.message}`, 'error');\n    }\n  };\n\n  // UI helpers\n  const toggleTheme = () => setTheme(theme === 'light' ? 'dark' : 'light');\n  const filteredUsers = exportedUsers.filter(user => user.username.toLowerCase().includes(usernameFilter.toLowerCase()) && user.schoolPath.toLowerCase().includes(orgUnitFilter.toLowerCase()));\n  const indexOfLastUser = currentPage * usersPerPage;\n  const indexOfFirstUser = indexOfLastUser - usersPerPage;\n  const currentUsers = filteredUsers.slice(indexOfFirstUser, indexOfLastUser);\n  const totalPages = Math.ceil(filteredUsers.length / usersPerPage);\n  const handleNextPage = () => currentPage < totalPages && setCurrentPage(currentPage + 1);\n  const handlePrevPage = () => currentPage > 1 && setCurrentPage(currentPage - 1);\n  const toggleColumn = columnId => {\n    setSelectedColumns(prev => prev.includes(columnId) ? prev.filter(id => id !== columnId) : [...prev, columnId]);\n  };\n  const getLogColor = type => {\n    switch (type) {\n      case 'error':\n        return 'text-red-400';\n      case 'warning':\n        return 'text-yellow-400';\n      case 'success':\n        return 'text-green-400';\n      default:\n        return 'text-gray-300';\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `min-h-screen p-6 ${theme === 'dark' ? 'bg-gradient-to-br from-gray-900 to-gray-800' : 'bg-gradient-to-br from-gray-50 to-white'}`,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"max-w-7xl mx-auto rounded-2xl shadow-2xl overflow-hidden border border-gray-200 dark:border-gray-700\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: `p-6 ${theme === 'dark' ? 'bg-gradient-to-r from-blue-900 to-blue-700' : 'bg-gradient-to-r from-blue-600 to-blue-400'} text-white relative overflow-hidden`,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-between items-center z-10\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center space-x-4\",\n            children: [/*#__PURE__*/_jsxDEV(FiUsers, {\n              className: \"text-3xl transform hover:scale-110 transition-transform duration-300\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 491,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n              className: \"text-3xl font-bold tracking-wide shadow-sm\",\n              children: \"DHIS2 User Manager\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 492,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 490,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex space-x-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: toggleTheme,\n              className: \"flex items-center space-x-2 bg-white bg-opacity-10 px-4 py-2 rounded-lg hover:bg-opacity-20 transition-all duration-300 shadow-md\",\n              \"aria-label\": `Switch to ${theme === 'light' ? 'dark' : 'light'} mode`,\n              children: [theme === 'light' ? /*#__PURE__*/_jsxDEV(FiMoon, {\n                className: \"text-xl\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 500,\n                columnNumber: 38\n              }, this) : /*#__PURE__*/_jsxDEV(FiSun, {\n                className: \"text-xl\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 500,\n                columnNumber: 71\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"font-medium\",\n                children: theme === 'light' ? 'Dark' : 'Light'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 501,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 495,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setShowHelp(true),\n              className: \"flex items-center space-x-2 bg-white bg-opacity-10 px-4 py-2 rounded-lg hover:bg-opacity-20 transition-all duration-300 shadow-md\",\n              \"aria-label\": \"Open help\",\n              children: [/*#__PURE__*/_jsxDEV(FiHelpCircle, {\n                className: \"text-xl\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 508,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"font-medium\",\n                children: \"Help\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 509,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 503,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 494,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 489,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"absolute top-0 left-0 w-64 h-64 bg-blue-300 opacity-10 rounded-full -translate-x-1/2 -translate-y-1/2 blur-xl\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 513,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 488,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `p-6 ${theme === 'dark' ? 'bg-gray-800' : 'bg-white'} space-y-6`,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-4 rounded-xl bg-blue-50 border border-blue-100 dark:bg-gray-900 dark:border-gray-800 flex items-center justify-between\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"font-semibold mr-3\",\n              children: \"Server Status:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 521,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: `inline-block w-3 h-3 rounded-full mr-2 ${connectionStatus === 'connected' ? 'bg-green-500' : 'bg-red-500'} animate-pulse`\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 522,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"font-medium\",\n              children: connectionStatus\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 525,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 520,\n            columnNumber: 13\n          }, this), connectionStatus === 'disconnected' && /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-sm text-red-600 dark:text-red-400 ml-4\",\n            children: \"Connection issues detected. Some operations may fail.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 528,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 519,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex border-b-2 border-gray-200 dark:border-gray-700\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            role: \"tab\",\n            id: \"import-tab\",\n            className: `px-6 py-3 font-semibold flex items-center space-x-2 ${activeTab === 'import' ? 'text-blue-600 dark:text-blue-400 border-b-2 border-blue-600 dark:border-blue-400 bg-blue-50 dark:bg-gray-700' : 'text-gray-600 dark:text-gray-300 hover:text-gray-800 dark:hover:text-gray-100 hover:bg-gray-100 dark:hover:bg-gray-600'} transition-all duration-300 rounded-t-lg`,\n            onClick: () => setActiveTab('import'),\n            \"aria-selected\": activeTab === 'import',\n            \"aria-controls\": \"import-panel\",\n            children: [/*#__PURE__*/_jsxDEV(FiUpload, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 548,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Import Users\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 549,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 536,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            role: \"tab\",\n            id: \"export-tab\",\n            className: `px-6 py-3 font-semibold flex items-center space-x-2 ${activeTab === 'export' ? 'text-blue-600 dark:text-blue-400 border-b-2 border-blue-600 dark:border-blue-400 bg-blue-50 dark:bg-gray-700' : 'text-gray-600 dark:text-gray-300 hover:text-gray-800 dark:hover:text-gray-100 hover:bg-gray-100 dark:hover:bg-gray-600'} transition-all duration-300 rounded-t-lg`,\n            onClick: () => setActiveTab('export'),\n            \"aria-selected\": activeTab === 'export',\n            \"aria-controls\": \"export-panel\",\n            children: [/*#__PURE__*/_jsxDEV(FiDownload, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 563,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Export Users\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 564,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 551,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 535,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          role: \"tabpanel\",\n          id: \"import-panel\",\n          \"aria-labelledby\": \"import-tab\",\n          className: `space-y-6 ${activeTab === 'import' ? '' : 'hidden'}`,\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-6 bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              className: \"text-2xl font-bold text-gray-900 dark:text-white mb-4\",\n              children: \"Import Users\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 576,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"grid grid-cols-1 md:grid-cols-2 gap-6\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex flex-col space-y-4\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  className: \"block text-lg font-medium text-gray-700 dark:text-gray-300\",\n                  htmlFor: \"file-upload\",\n                  children: \"Upload File\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 579,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex flex-col md:flex-row space-y-4 md:space-y-0 md:space-x-4\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    className: \"flex-1 flex items-center justify-center bg-gradient-to-r from-blue-500 to-blue-700 text-white p-4 rounded-lg cursor-pointer hover:from-blue-600 hover:to-blue-800 transition-all duration-300 shadow-md\",\n                    children: [/*#__PURE__*/_jsxDEV(FiUpload, {\n                      className: \"mr-2\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 582,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      children: \"Choose File\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 583,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                      id: \"file-upload\",\n                      type: \"file\",\n                      accept: \".json,.csv\",\n                      onChange: handleFileUpload,\n                      disabled: processing,\n                      className: \"hidden\",\n                      \"aria-label\": \"Upload JSON or CSV file\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 584,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 581,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: () => {\n                      if (users.length > 0) {\n                        downloadFile(JSON.stringify(users, null, 2), 'converted_users.json', 'application/json');\n                      } else {\n                        appendLog('⚠️ No users loaded to convert', 'warning');\n                      }\n                    },\n                    className: \"flex-1 bg-gradient-to-r from-purple-500 to-purple-700 text-white px-6 py-3 rounded-lg hover:from-purple-600 hover:to-purple-800 transition-all duration-300 shadow-md disabled:bg-gray-400 disabled:cursor-not-allowed\",\n                    disabled: users.length === 0,\n                    \"aria-label\": \"Convert loaded users to JSON\",\n                    children: [/*#__PURE__*/_jsxDEV(FiDownload, {\n                      className: \"mr-2\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 606,\n                      columnNumber: 23\n                    }, this), \"Convert to JSON\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 594,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 580,\n                  columnNumber: 19\n                }, this), users.length > 0 && /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-green-600 dark:text-green-400 text-sm mt-2\",\n                  children: [\"\\u2705 \", users.length, \" users loaded\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 611,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 578,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex flex-col space-y-4\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  className: \"block text-lg font-medium text-gray-700 dark:text-gray-300\",\n                  htmlFor: \"batch-size\",\n                  children: \"Batch Settings\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 615,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                  id: \"batch-size\",\n                  value: batchSize,\n                  onChange: e => setBatchSize(Number(e.target.value)),\n                  className: \"w-full p-3 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all duration-300\",\n                  \"aria-label\": \"Select batch size for user import\",\n                  children: [1, 2, 5, 10].map(size => /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: size,\n                    className: \"bg-white dark:bg-gray-800\",\n                    children: [size, \" users/batch\"]\n                  }, size, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 624,\n                    columnNumber: 23\n                  }, this))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 616,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 614,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 577,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mt-6 flex flex-wrap gap-4\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: processUsers,\n                disabled: processing || users.length === 0 || connectionStatus !== 'connected',\n                className: `flex items-center space-x-2 px-6 py-3 rounded-lg text-white ${processing || users.length === 0 || connectionStatus !== 'connected' ? 'bg-gray-400 cursor-not-allowed' : 'bg-gradient-to-r from-green-500 to-green-700 hover:from-green-600 hover:to-green-800'} transition-all duration-300 shadow-md`,\n                \"aria-label\": \"Start user import\",\n                children: [/*#__PURE__*/_jsxDEV(FiPlay, {\n                  className: \"text-xl\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 640,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"Start Import\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 641,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 630,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: stopProcessing,\n                disabled: !processing,\n                className: `flex items-center space-x-2 px-6 py-3 rounded-lg text-white ${!processing ? 'bg-gray-400 cursor-not-allowed' : 'bg-gradient-to-r from-red-500 to-red-700 hover:from-red-600 hover:to-red-800'} transition-all duration-300 shadow-md`,\n                \"aria-label\": \"Stop user import\",\n                children: [/*#__PURE__*/_jsxDEV(FiSquare, {\n                  className: \"text-xl\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 653,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"Stop\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 654,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 643,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 629,\n              columnNumber: 15\n            }, this), processing && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-4 mt-4 overflow-hidden\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"bg-gradient-to-r from-blue-500 to-blue-700 h-4 rounded-full transition-all duration-300 ease-out\",\n                style: {\n                  width: `${progress}%`\n                },\n                role: \"progressbar\",\n                \"aria-valuenow\": progress,\n                \"aria-valuemin\": 0,\n                \"aria-valuemax\": 100\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 659,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 658,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 575,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 569,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          role: \"tabpanel\",\n          id: \"export-panel\",\n          \"aria-labelledby\": \"export-tab\",\n          className: `space-y-6 ${activeTab === 'export' ? '' : 'hidden'}`,\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-6 bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              className: \"text-2xl font-bold text-gray-900 dark:text-white mb-4\",\n              children: \"Export Users\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 681,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: exportUsersToCSV,\n              disabled: processing,\n              className: `flex items-center space-x-2 px-6 py-3 rounded-lg text-white ${processing ? 'bg-gray-400 cursor-not-allowed' : 'bg-gradient-to-r from-blue-500 to-blue-700 hover:from-blue-600 hover:to-blue-800'} transition-all duration-300 shadow-md`,\n              \"aria-label\": \"Fetch users from DHIS2\",\n              children: [/*#__PURE__*/_jsxDEV(FiDownload, {\n                className: \"text-xl\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 692,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Fetch Users from DHIS2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 693,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 682,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 680,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 674,\n          columnNumber: 11\n        }, this), showHelp && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50\",\n          role: \"dialog\",\n          \"aria-labelledby\": \"help-title\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `p-6 rounded-xl bg-white dark:bg-gray-800 shadow-2xl w-full max-w-md ${theme === 'dark' ? 'border border-gray-700' : 'border border-gray-200'}`,\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              id: \"help-title\",\n              className: \"text-2xl font-bold text-gray-900 dark:text-white mb-4\",\n              children: \"Help\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 703,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"mb-4 text-gray-700 dark:text-gray-300\",\n              children: [\"The DHIS2 User Manager allows you to import and export user data in JSON or CSV formats. Upload a file to import users, or fetch and filter users from the DHIS2 server for export. For more details, visit the \", /*#__PURE__*/_jsxDEV(\"a\", {\n                href: \"https://docs.dhis2.org\",\n                className: \"text-blue-600 dark:text-blue-400 hover:underline\",\n                children: \"DHIS2 documentation\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 707,\n                columnNumber: 47\n              }, this), \".\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 704,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setShowHelp(false),\n              className: \"w-full bg-gradient-to-r from-blue-500 to-blue-700 text-white px-6 py-3 rounded-lg hover:from-blue-600 hover:to-blue-800 transition-all duration-300 shadow-md\",\n              \"aria-label\": \"Close help modal\",\n              children: \"Close\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 709,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 702,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 701,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 517,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 486,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 485,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"IuE36PfyM2NAkAc+dBgt6wqSmwo=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useRef","useEffect","useCallback","axios","FiUpload","FiDownload","FiPlay","FiSquare","FiSun","FiMoon","FiHelpCircle","FiUsers","convertCSVtoJSON","jsxDEV","_jsxDEV","defaults","timeout","maxContentLength","maxBodyLength","BASE_URL","process","env","REACT_APP_BASE_URL","HEADERS","REACT_APP_API_TOKEN","SAMPLE_USERS","firstName","surname","username","password","userRoles","id","organisationUnits","dataViewOrganisationUnits","teiSearchOrganisationUnits","userGroups","App","_s","users","setUsers","log","setLog","processing","setProcessing","progress","setProgress","exportedUsers","setExportedUsers","usernameFilter","setUsernameFilter","orgUnitFilter","setOrgUnitFilter","theme","setTheme","currentPage","setCurrentPage","activeTab","setActiveTab","batchSize","setBatchSize","connectionStatus","setConnectionStatus","selectedColumns","setSelectedColumns","showHelp","setShowHelp","shouldStop","logEndRef","usersPerPage","availableColumns","label","appendLog","message","type","timestamp","Date","toLocaleTimeString","prevLog","newLog","slice","apiRequest","config","attempt","maxRetries","baseDelay","response","headers","error","retryDelay","Math","pow","Promise","resolve","setTimeout","retries","checkConnection","method","url","interval","setInterval","clearInterval","_logEndRef$current","current","scrollIntoView","behavior","handleFileUpload","e","_e$target$files","file","target","files","reader","FileReader","onloadstart","onload","event","name","endsWith","convertedUsers","result","length","data","JSON","parse","Array","isArray","Error","onerror","readAsText","downloadFile","content","filename","mimeType","blob","Blob","link","document","createElement","href","URL","createObjectURL","download","body","appendChild","click","removeChild","downloadSampleJson","stringify","downloadSampleCSV","join","sampleRow","map","field","csvContent","validateUser","user","_user$userRoles","_user$organisationUni","getUserId","_res$data$users","_res$data$users$","res","updateUser","payload","role","ou","group","_error$response","_error$response$data","createUser","_error$response2","status","processBatch","batch","promises","all","processUsers","invalidUsers","filter","successCount","errorCount","totalBatches","ceil","i","floor","batchResults","Boolean","x","round","stopProcessing","exportUsersToCSV","seenIds","Set","usersList","nextUrl","pager","_user$userGroups","_user$userRoles2","uid","has","add","g","r","lastLogin","schoolPaths","schoolUIDs","forEach","_ou$ancestors","ancestors","path","a","push","schoolPath","schoolUID","page","size","nextPage","exportFilteredUsers","format","filtered","u","toLowerCase","includes","extension","col","rows","value","toISOString","toggleTheme","filteredUsers","indexOfLastUser","indexOfFirstUser","currentUsers","totalPages","handleNextPage","handlePrevPage","toggleColumn","columnId","prev","getLogColor","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","htmlFor","accept","onChange","disabled","Number","style","width","_c","$RefreshReg$"],"sources":["C:/Users/nongu/Documents/Projects/dhis2-user-manager/src/App.js"],"sourcesContent":["import React, { useState, useRef, useEffect, useCallback } from 'react';\nimport axios from 'axios';\nimport { FiUpload, FiDownload, FiPlay, FiSquare, FiSun, FiMoon, FiHelpCircle, FiUsers } from 'react-icons/fi';\nimport { convertCSVtoJSON } from './convertCSVtoJSON'; // Assumed external module\n\n// Configure axios defaults\naxios.defaults.timeout = 30000; // 30 second timeout\naxios.defaults.maxContentLength = 50 * 1024 * 1024; // 50MB\naxios.defaults.maxBodyLength = 50 * 1024 * 1024; // 50MB\n\nconst BASE_URL = process.env.REACT_APP_BASE_URL || \"https://emis.dhis2nigeria.org.ng/dhis/api\";\nconst HEADERS = {\n  'Content-Type': 'application/json',\n  'Authorization': `ApiToken ${process.env.REACT_APP_API_TOKEN}`,\n};\n\n// Sample user data for download\nconst SAMPLE_USERS = [\n  {\n    firstName: \"PVT\",\n    surname: \"Royal\",\n    username: 12020407,\n    password: \"Egor123@\",\n    userRoles: [{ id: \"KBkjSGFKSKI\" }, { id: \"oO6BBApzmHZ\" }],\n    organisationUnits: [{ id: \"wRQIw3NMW29\" }],\n    dataViewOrganisationUnits: [{ id: \"wRQIw3NMW29\" }],\n    teiSearchOrganisationUnits: [{ id: \"wRQIw3NMW29\" }],\n    userGroups: [{ id: \"U8WuGyxfFFp\" }],\n  },\n  {\n    firstName: \"PVT\",\n    surname: \"Dominion\",\n    username: 12020409,\n    password: \"Egor123@\",\n    userRoles: [{ id: \"KBkjSGFKSKI\" }, { id: \"oO6BBApzmHZ\" }],\n    organisationUnits: [{ id: \"AVEyJypVCjJ\" }],\n    dataViewOrganisationUnits: [{ id: \"AVEyJypVCjJ\" }],\n    teiSearchOrganisationUnits: [{ id: \"AVEyJypVCjJ\" }],\n    userGroups: [{ id: \"U8WuGyxfFFp\" }],\n  },\n];\n\nfunction App() {\n  // State declarations\n  const [users, setUsers] = useState([]);\n  const [log, setLog] = useState([]);\n  const [processing, setProcessing] = useState(false);\n  const [progress, setProgress] = useState(0);\n  const [exportedUsers, setExportedUsers] = useState([]);\n  const [usernameFilter, setUsernameFilter] = useState('');\n  const [orgUnitFilter, setOrgUnitFilter] = useState('');\n  const [theme, setTheme] = useState('dark');\n  const [currentPage, setCurrentPage] = useState(1);\n  const [activeTab, setActiveTab] = useState('import');\n  const [batchSize, setBatchSize] = useState(2);\n  const [connectionStatus, setConnectionStatus] = useState('checking...');\n  const [selectedColumns, setSelectedColumns] = useState([\n    'id', 'name', 'username', 'userGroups', 'userRoles', 'lastLogin', 'schoolPath',\n  ]);\n  const [showHelp, setShowHelp] = useState(false);\n\n  const shouldStop = useRef(false);\n  const logEndRef = useRef(null);\n\n  const usersPerPage = 100;\n  const availableColumns = [\n    { id: 'id', label: 'ID' },\n    { id: 'name', label: 'Name' },\n    { id: 'username', label: 'Username' },\n    { id: 'userGroups', label: 'Groups' },\n    { id: 'userRoles', label: 'Roles' },\n    { id: 'lastLogin', label: 'Last Login' },\n    { id: 'schoolPath', label: 'School Path' },\n    { id: 'schoolUID', label: 'School UID' },\n  ];\n\n  // Append log with size limit\n  const appendLog = (message, type = 'info') => {\n    const timestamp = new Date().toLocaleTimeString();\n    setLog(prevLog => {\n      const newLog = [...prevLog, { message, type, timestamp }];\n      return newLog.slice(-100); // Keep last 100 entries\n    });\n  };\n\n  // Enhanced API request with retries\n  const apiRequest = useCallback(async (config, attempt = 1) => {\n    const maxRetries = 3;\n    const baseDelay = 1000;\n    \n    try {\n      const response = await axios({\n        ...config,\n        timeout: 30000,\n        headers: { ...HEADERS, ...config.headers },\n      });\n      return response;\n    } catch (error) {\n      if (attempt >= maxRetries) throw error;\n      \n      const retryDelay = baseDelay * Math.pow(2, attempt - 1);\n      appendLog(`⚠️ Attempt ${attempt} failed, retrying in ${retryDelay/1000}s...`, 'warning');\n      await new Promise(resolve => setTimeout(resolve, retryDelay));\n      return apiRequest(config, attempt + 1);\n    }\n  }, [appendLog]);\n\n  // Connection monitoring with retry\n  useEffect(() => {\n    let retries = 0;\n    const maxRetries = 3;\n    \n    const checkConnection = async () => {\n      try {\n        await apiRequest({ method: 'get', url: `${BASE_URL}/system/ping` });\n        setConnectionStatus('connected');\n        retries = 0;\n      } catch {\n        retries++;\n        if (retries >= maxRetries) {\n          setConnectionStatus('disconnected');\n          appendLog('⚠️ Failed to connect to server after retries', 'warning');\n        } else {\n          setTimeout(checkConnection, 1000 * Math.pow(2, retries));\n        }\n      }\n    };\n    \n    checkConnection();\n    const interval = setInterval(checkConnection, 30000);\n    return () => clearInterval(interval);\n  }, [apiRequest]);\n\n  // Auto-scroll log to bottom\n  useEffect(() => {\n    logEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n  }, [log]);\n\n  // File upload handler\n  const handleFileUpload = (e) => {\n    const file = e.target.files?.[0];\n    if (!file) return;\n\n    const reader = new FileReader();\n    reader.onloadstart = () => appendLog('⏳ Loading user file...', 'info');\n    reader.onload = event => {\n      try {\n        if (file.name.endsWith('.csv')) {\n          const convertedUsers = convertCSVtoJSON(event.target.result);\n          if (convertedUsers) {\n            setUsers(convertedUsers);\n            appendLog(`✅ Loaded and converted ${convertedUsers.length} users from CSV`, 'success');\n          }\n        } else {\n          const data = JSON.parse(event.target.result);\n          if (!Array.isArray(data)) throw new Error('File should contain an array of users');\n          setUsers(data);\n          appendLog(`✅ Loaded ${data.length} users from JSON`, 'success');\n        }\n      } catch (error) {\n        appendLog(`❌ Error parsing file: ${error.message}`, 'error');\n      }\n    };\n    reader.onerror = () => appendLog('❌ Failed to read file', 'error');\n    reader.readAsText(file);\n  };\n\n  // Reusable download function\n  const downloadFile = (content, filename, mimeType) => {\n    try {\n      const blob = new Blob([content], { type: mimeType });\n      const link = document.createElement('a');\n      link.href = URL.createObjectURL(blob);\n      link.download = filename;\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n      appendLog(`✅ Downloaded ${filename}`, 'success');\n    } catch (error) {\n      appendLog(`❌ Download failed: ${error.message}`, 'error');\n    }\n  };\n\n  // Sample JSON download\n  const downloadSampleJson = () => {\n    downloadFile(JSON.stringify(SAMPLE_USERS, null, 2), 'dhis2_users_sample.json', 'application/json');\n  };\n\n  // Sample CSV download\n  const downloadSampleCSV = () => {\n    const headers = [\n      'firstName',\n      'surname',\n      'username',\n      'password',\n      'userRoles',\n      'organisationUnits',\n      'dataViewOrganisationUnits',\n      'teiSearchOrganisationUnits',\n      'userGroups',\n    ].join(',');\n\n    const sampleRow = [\n      'JSS',\n      'Com',\n      '11010051',\n      'Abakaliki123@',\n      '[{\"id\": \"KBkjSGFKSKI\"},{\"id\": \"oO6BBApzmHZ\"}]',\n      '[{\"id\": \"wMcSLrAHchs\"}]',\n      '[{\"id\": \"wMcSLrAHchs\"}]',\n      '[{\"id\": \"wMcSLrAHchs\"}]',\n      '[{\"id\": \"Ca67o1mgiPn\"}]',\n    ].map(field => `\"${field}\"`).join(',');\n\n    const csvContent = [headers, sampleRow].join('\\n');\n    downloadFile(csvContent, 'dhis2_users_template.csv', 'text/csv;charset=utf-8;');\n  };\n\n  // User validation\n  const validateUser = (user) => {\n    if (!user.username) return 'Username is required';\n    if (!user.userRoles?.length) return 'At least one user role is required';\n    if (!user.organisationUnits?.length) return 'At least one organization unit is required';\n    return null;\n  };\n\n  // User management functions\n  const getUserId = async (username) => {\n    try {\n      const res = await apiRequest({\n        method: 'get',\n        url: `${BASE_URL}/users?filter=username:eq:${username}&fields=id`,\n      });\n      return res.data.users?.[0]?.id || null;\n    } catch (error) {\n      appendLog(`⚠️ Error fetching user ID for ${username}: ${error.message}`, 'warning');\n      return null;\n    }\n  };\n\n  const updateUser = async (user, id) => {\n    try {\n      const payload = {\n        firstName: user.firstName,\n        surname: user.surname,\n        username: user.username,\n        userRoles: user.userRoles.map(role => ({ id: role.id })),\n        organisationUnits: user.organisationUnits.map(ou => ({ id: ou.id })),\n        dataViewOrganisationUnits: user.dataViewOrganisationUnits.map(ou => ({ id: ou.id })),\n        teiSearchOrganisationUnits: user.teiSearchOrganisationUnits.map(ou => ({ id: ou.id })),\n        userGroups: user.userGroups.map(group => ({ id: group.id })),\n      };\n\n      await apiRequest({\n        method: 'put',\n        url: `${BASE_URL}/users/${id}`,\n        data: payload,\n      });\n      \n      appendLog(`🔄 Updated user: ${user.username}`, 'success');\n      return true;\n    } catch (error) {\n      appendLog(`❌ Error updating user ${user.username}: ${error.response?.data?.message || error.message}`, 'error');\n      return false;\n    }\n  };\n\n  const createUser = async (user) => {\n    try {\n      await apiRequest({\n        method: 'post',\n        url: `${BASE_URL}/users`,\n        data: user,\n      });\n      appendLog(`🆕 Created user: ${user.username}`, 'success');\n      return true;\n    } catch (error) {\n      if (error.response?.status === 409) {\n        const id = await getUserId(user.username);\n        if (id) {\n          appendLog(`⚠️ Conflict: Updating user ${user.username}`, 'warning');\n          return await updateUser(user, id);\n        } else {\n          appendLog(`❌ Conflict and ID not found: ${user.username}`, 'error');\n          return false;\n        }\n      }\n      appendLog(`❌ Error for ${user.username}: ${error.message}`, 'error');\n      return false;\n    }\n  };\n\n  // Process batch with parallel execution\n  const processBatch = async (batch) => {\n    const promises = batch.map(async (user) => {\n      try {\n        const id = await getUserId(user.username);\n        return id ? await updateUser(user, id) : await createUser(user);\n      } catch (error) {\n        appendLog(`❌ Failed to process ${user.username}: ${error.message}`, 'error');\n        return false;\n      }\n    });\n    return Promise.all(promises);\n  };\n\n  // Process users with validation\n  const processUsers = async () => {\n    const invalidUsers = users.filter(user => validateUser(user));\n    if (invalidUsers.length) {\n      appendLog(`⚠️ Invalid users detected: ${invalidUsers.length}`, 'warning');\n      return;\n    }\n\n    setProcessing(true);\n    shouldStop.current = false;\n    setProgress(0);\n    \n    let successCount = 0;\n    let errorCount = 0;\n    const totalBatches = Math.ceil(users.length / batchSize);\n\n    appendLog(`🚀 Starting import of ${users.length} users (${totalBatches} batches)`, 'info');\n    \n    for (let i = 0; i < users.length && !shouldStop.current; i += batchSize) {\n      const batch = users.slice(i, i + batchSize);\n      appendLog(`🔨 Processing batch ${Math.floor(i/batchSize) + 1}/${totalBatches}`, 'info');\n      \n      const batchResults = await processBatch(batch);\n      successCount += batchResults.filter(Boolean).length;\n      errorCount += batchResults.filter(x => !x).length;\n      \n      setProgress(Math.round(((i + batchSize) / users.length) * 100));\n      \n      if (shouldStop.current) break;\n    }\n    \n    appendLog(\n      `🎉 Process ${shouldStop.current ? 'stopped' : 'completed'}. Success: ${successCount}, Errors: ${errorCount}`,\n      errorCount > 0 ? 'warning' : 'success'\n    );\n    \n    setProcessing(false);\n  };\n\n  const stopProcessing = () => {\n    shouldStop.current = true;\n    appendLog(\"⏹ Stopping process after current batch completes...\", 'warning');\n  };\n\n  // Export functions\n  const exportUsersToCSV = async () => {\n    appendLog(\"📦 Starting DHIS2 user export...\", 'info');\n    setProcessing(true);\n\n    try {\n      let seenIds = new Set();\n      let usersList = [];\n      let nextUrl = `${BASE_URL}/users.json?fields=id,name,username,userGroups[name],userRoles[name],lastLogin,organisationUnits[ancestors[name],name,id]&paging=true&pageSize=1000`;\n\n      while (nextUrl) {\n        const response = await apiRequest({ method: 'get', url: nextUrl });\n        if (response.status !== 200) break;\n\n        const data = response.data;\n        const users = data.users || [];\n        const pager = data.pager || {};\n\n        for (const user of users) {\n          const uid = user.id;\n          if (!uid || seenIds.has(uid)) continue;\n          seenIds.add(uid);\n\n          const userGroups = user.userGroups?.map(g => g.name).join(\"; \") || \"\";\n          const userRoles = user.userRoles?.map(r => r.name).join(\"; \") || \"\";\n          const lastLogin = user.lastLogin || \"\";\n\n          let schoolPaths = [];\n          let schoolUIDs = [];\n\n          (user.organisationUnits || []).forEach(ou => {\n            if (ou.ancestors?.length === 4) {\n              const path = [...ou.ancestors.map(a => a.name), ou.name].join(\" > \");\n              schoolPaths.push(path);\n              schoolUIDs.push(ou.id || \"\");\n            }\n          });\n\n          usersList.push({\n            id: uid,\n            name: user.name || '',\n            username: user.username || '',\n            userGroups,\n            userRoles,\n            lastLogin,\n            schoolPath: schoolPaths.join(\" | \"),\n            schoolUID: schoolUIDs.join(\" | \"),\n          });\n        }\n\n        appendLog(`✅ Page ${pager.page} fetched. Total: ${seenIds.size}`, 'success');\n        nextUrl = pager.nextPage || null;\n      }\n\n      setExportedUsers(usersList);\n      appendLog(`🎉 Export complete. Total users: ${seenIds.size}`, 'success');\n    } catch (error) {\n      appendLog(`❌ Export failed: ${error.message}`, 'error');\n    } finally {\n      setProcessing(false);\n    }\n  };\n\n  const exportFilteredUsers = (format = 'csv') => {\n    const filtered = exportedUsers.filter(u =>\n      u.username.toLowerCase().includes(usernameFilter.toLowerCase()) &&\n      u.schoolPath.toLowerCase().includes(orgUnitFilter.toLowerCase())\n    );\n\n    if (filtered.length === 0) {\n      appendLog('⚠️ No users match your filters', 'warning');\n      return;\n    }\n\n    try {\n      let content, mimeType, extension;\n      \n      if (format === 'csv') {\n        const headers = availableColumns\n          .filter(col => selectedColumns.includes(col.id))\n          .map(col => col.label);\n        \n        const rows = filtered.map(user => \n          selectedColumns.map(col => {\n            const value = user[col] || '';\n            return value.includes(',') ? `\"${value}\"` : value;\n          }).join(',')\n        );\n        \n        content = [headers.join(','), ...rows].join('\\n');\n        mimeType = 'text/csv;charset=utf-8;';\n        extension = 'csv';\n      } else {\n        content = JSON.stringify(filtered, null, 2);\n        mimeType = 'application/json';\n        extension = 'json';\n      }\n\n      downloadFile(content, `dhis2_users_${new Date().toISOString().slice(0,10)}.${extension}`, mimeType);\n    } catch (error) {\n      appendLog(`❌ Export error: ${error.message}`, 'error');\n    }\n  };\n\n  // UI helpers\n  const toggleTheme = () => setTheme(theme === 'light' ? 'dark' : 'light');\n  const filteredUsers = exportedUsers.filter(user =>\n    user.username.toLowerCase().includes(usernameFilter.toLowerCase()) &&\n    user.schoolPath.toLowerCase().includes(orgUnitFilter.toLowerCase())\n  );\n  const indexOfLastUser = currentPage * usersPerPage;\n  const indexOfFirstUser = indexOfLastUser - usersPerPage;\n  const currentUsers = filteredUsers.slice(indexOfFirstUser, indexOfLastUser);\n  const totalPages = Math.ceil(filteredUsers.length / usersPerPage);\n\n  const handleNextPage = () => currentPage < totalPages && setCurrentPage(currentPage + 1);\n  const handlePrevPage = () => currentPage > 1 && setCurrentPage(currentPage - 1);\n\n  const toggleColumn = (columnId) => {\n    setSelectedColumns(prev => \n      prev.includes(columnId) ? prev.filter(id => id !== columnId) : [...prev, columnId]\n    );\n  };\n\n  const getLogColor = (type) => {\n    switch (type) {\n      case 'error': return 'text-red-400';\n      case 'warning': return 'text-yellow-400';\n      case 'success': return 'text-green-400';\n      default: return 'text-gray-300';\n    }\n  };\n\n  return (\n    <div className={`min-h-screen p-6 ${theme === 'dark' ? 'bg-gradient-to-br from-gray-900 to-gray-800' : 'bg-gradient-to-br from-gray-50 to-white'}`}>\n      <div className=\"max-w-7xl mx-auto rounded-2xl shadow-2xl overflow-hidden border border-gray-200 dark:border-gray-700\">\n        {/* Header */}\n        <div className={`p-6 ${theme === 'dark' ? 'bg-gradient-to-r from-blue-900 to-blue-700' : 'bg-gradient-to-r from-blue-600 to-blue-400'} text-white relative overflow-hidden`}>\n          <div className=\"flex justify-between items-center z-10\">\n            <div className=\"flex items-center space-x-4\">\n              <FiUsers className=\"text-3xl transform hover:scale-110 transition-transform duration-300\" />\n              <h1 className=\"text-3xl font-bold tracking-wide shadow-sm\">DHIS2 User Manager</h1>\n            </div>\n            <div className=\"flex space-x-3\">\n              <button \n                onClick={toggleTheme} \n                className=\"flex items-center space-x-2 bg-white bg-opacity-10 px-4 py-2 rounded-lg hover:bg-opacity-20 transition-all duration-300 shadow-md\"\n                aria-label={`Switch to ${theme === 'light' ? 'dark' : 'light'} mode`}\n              >\n                {theme === 'light' ? <FiMoon className=\"text-xl\" /> : <FiSun className=\"text-xl\" />}\n                <span className=\"font-medium\">{theme === 'light' ? 'Dark' : 'Light'}</span>\n              </button>\n              <button \n                onClick={() => setShowHelp(true)}\n                className=\"flex items-center space-x-2 bg-white bg-opacity-10 px-4 py-2 rounded-lg hover:bg-opacity-20 transition-all duration-300 shadow-md\"\n                aria-label=\"Open help\"\n              >\n                <FiHelpCircle className=\"text-xl\" />\n                <span className=\"font-medium\">Help</span>\n              </button>\n            </div>\n          </div>\n          <div className=\"absolute top-0 left-0 w-64 h-64 bg-blue-300 opacity-10 rounded-full -translate-x-1/2 -translate-y-1/2 blur-xl\"></div>\n        </div>\n\n        {/* Main Content */}\n        <div className={`p-6 ${theme === 'dark' ? 'bg-gray-800' : 'bg-white'} space-y-6`}>\n          {/* Connection Status */}\n          <div className=\"p-4 rounded-xl bg-blue-50 border border-blue-100 dark:bg-gray-900 dark:border-gray-800 flex items-center justify-between\">\n            <div className=\"flex items-center\">\n              <span className=\"font-semibold mr-3\">Server Status:</span>\n              <span className={`inline-block w-3 h-3 rounded-full mr-2 ${\n                connectionStatus === 'connected' ? 'bg-green-500' : 'bg-red-500'\n              } animate-pulse`}></span>\n              <span className=\"font-medium\">{connectionStatus}</span>\n            </div>\n            {connectionStatus === 'disconnected' && (\n              <p className=\"text-sm text-red-600 dark:text-red-400 ml-4\">\n                Connection issues detected. Some operations may fail.\n              </p>\n            )}\n          </div>\n\n          {/* Tabs */}\n          <div className=\"flex border-b-2 border-gray-200 dark:border-gray-700\">\n            <button\n              role=\"tab\"\n              id=\"import-tab\"\n              className={`px-6 py-3 font-semibold flex items-center space-x-2 ${\n                activeTab === 'import'\n                  ? 'text-blue-600 dark:text-blue-400 border-b-2 border-blue-600 dark:border-blue-400 bg-blue-50 dark:bg-gray-700'\n                  : 'text-gray-600 dark:text-gray-300 hover:text-gray-800 dark:hover:text-gray-100 hover:bg-gray-100 dark:hover:bg-gray-600'\n              } transition-all duration-300 rounded-t-lg`}\n              onClick={() => setActiveTab('import')}\n              aria-selected={activeTab === 'import'}\n              aria-controls=\"import-panel\"\n            >\n              <FiUpload />\n              <span>Import Users</span>\n            </button>\n            <button\n              role=\"tab\"\n              id=\"export-tab\"\n              className={`px-6 py-3 font-semibold flex items-center space-x-2 ${\n                activeTab === 'export'\n                  ? 'text-blue-600 dark:text-blue-400 border-b-2 border-blue-600 dark:border-blue-400 bg-blue-50 dark:bg-gray-700'\n                  : 'text-gray-600 dark:text-gray-300 hover:text-gray-800 dark:hover:text-gray-100 hover:bg-gray-100 dark:hover:bg-gray-600'\n              } transition-all duration-300 rounded-t-lg`}\n              onClick={() => setActiveTab('export')}\n              aria-selected={activeTab === 'export'}\n              aria-controls=\"export-panel\"\n            >\n              <FiDownload />\n              <span>Export Users</span>\n            </button>\n          </div>\n\n          {/* Import Tab */}\n          <div\n            role=\"tabpanel\"\n            id=\"import-panel\"\n            aria-labelledby=\"import-tab\"\n            className={`space-y-6 ${activeTab === 'import' ? '' : 'hidden'}`}\n          >\n            <div className=\"p-6 bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700\">\n              <h2 className=\"text-2xl font-bold text-gray-900 dark:text-white mb-4\">Import Users</h2>\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                <div className=\"flex flex-col space-y-4\">\n                  <label className=\"block text-lg font-medium text-gray-700 dark:text-gray-300\" htmlFor=\"file-upload\">Upload File</label>\n                  <div className=\"flex flex-col md:flex-row space-y-4 md:space-y-0 md:space-x-4\">\n                    <label className=\"flex-1 flex items-center justify-center bg-gradient-to-r from-blue-500 to-blue-700 text-white p-4 rounded-lg cursor-pointer hover:from-blue-600 hover:to-blue-800 transition-all duration-300 shadow-md\">\n                      <FiUpload className=\"mr-2\" />\n                      <span>Choose File</span>\n                      <input \n                        id=\"file-upload\"\n                        type=\"file\" \n                        accept=\".json,.csv\" \n                        onChange={handleFileUpload} \n                        disabled={processing}\n                        className=\"hidden\" \n                        aria-label=\"Upload JSON or CSV file\"\n                      />\n                    </label>\n                    <button \n                      onClick={() => {\n                        if (users.length > 0) {\n                          downloadFile(JSON.stringify(users, null, 2), 'converted_users.json', 'application/json');\n                        } else {\n                          appendLog('⚠️ No users loaded to convert', 'warning');\n                        }\n                      }}\n                      className=\"flex-1 bg-gradient-to-r from-purple-500 to-purple-700 text-white px-6 py-3 rounded-lg hover:from-purple-600 hover:to-purple-800 transition-all duration-300 shadow-md disabled:bg-gray-400 disabled:cursor-not-allowed\"\n                      disabled={users.length === 0}\n                      aria-label=\"Convert loaded users to JSON\"\n                    >\n                      <FiDownload className=\"mr-2\" />\n                      Convert to JSON\n                    </button>\n                  </div>\n                  {users.length > 0 && (\n                    <p className=\"text-green-600 dark:text-green-400 text-sm mt-2\">✅ {users.length} users loaded</p>\n                  )}\n                </div>\n                <div className=\"flex flex-col space-y-4\">\n                  <label className=\"block text-lg font-medium text-gray-700 dark:text-gray-300\" htmlFor=\"batch-size\">Batch Settings</label>\n                  <select\n                    id=\"batch-size\"\n                    value={batchSize}\n                    onChange={(e) => setBatchSize(Number(e.target.value))}\n                    className=\"w-full p-3 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all duration-300\"\n                    aria-label=\"Select batch size for user import\"\n                  >\n                    {[1, 2, 5, 10].map(size => (\n                      <option key={size} value={size} className=\"bg-white dark:bg-gray-800\">{size} users/batch</option>\n                    ))}\n                  </select>\n                </div>\n              </div>\n              <div className=\"mt-6 flex flex-wrap gap-4\">\n                <button \n                  onClick={processUsers} \n                  disabled={processing || users.length === 0 || connectionStatus !== 'connected'}\n                  className={`flex items-center space-x-2 px-6 py-3 rounded-lg text-white ${\n                    processing || users.length === 0 || connectionStatus !== 'connected'\n                      ? 'bg-gray-400 cursor-not-allowed'\n                      : 'bg-gradient-to-r from-green-500 to-green-700 hover:from-green-600 hover:to-green-800'\n                  } transition-all duration-300 shadow-md`}\n                  aria-label=\"Start user import\"\n                >\n                  <FiPlay className=\"text-xl\" />\n                  <span>Start Import</span>\n                </button>\n                <button \n                  onClick={stopProcessing} \n                  disabled={!processing}\n                  className={`flex items-center space-x-2 px-6 py-3 rounded-lg text-white ${\n                    !processing\n                      ? 'bg-gray-400 cursor-not-allowed'\n                      : 'bg-gradient-to-r from-red-500 to-red-700 hover:from-red-600 hover:to-red-800'\n                  } transition-all duration-300 shadow-md`}\n                  aria-label=\"Stop user import\"\n                >\n                  <FiSquare className=\"text-xl\" />\n                  <span>Stop</span>\n                </button>\n              </div>\n              {processing && (\n                <div className=\"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-4 mt-4 overflow-hidden\">\n                  <div \n                    className=\"bg-gradient-to-r from-blue-500 to-blue-700 h-4 rounded-full transition-all duration-300 ease-out\"\n                    style={{ width: `${progress}%` }} \n                    role=\"progressbar\"\n                    aria-valuenow={progress}\n                    aria-valuemin={0}\n                    aria-valuemax={100}\n                  />\n                </div>\n              )}\n            </div>\n            {/* Activity Log section remains unchanged for brevity, apply similar styling */}\n          </div>\n\n          {/* Export Tab */}\n          <div\n            role=\"tabpanel\"\n            id=\"export-panel\"\n            aria-labelledby=\"export-tab\"\n            className={`space-y-6 ${activeTab === 'export' ? '' : 'hidden'}`}\n          >\n            <div className=\"p-6 bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700\">\n              <h2 className=\"text-2xl font-bold text-gray-900 dark:text-white mb-4\">Export Users</h2>\n              <button \n                onClick={exportUsersToCSV} \n                disabled={processing}\n                className={`flex items-center space-x-2 px-6 py-3 rounded-lg text-white ${\n                  processing\n                    ? 'bg-gray-400 cursor-not-allowed'\n                    : 'bg-gradient-to-r from-blue-500 to-blue-700 hover:from-blue-600 hover:to-blue-800'\n                } transition-all duration-300 shadow-md`}\n                aria-label=\"Fetch users from DHIS2\"\n              >\n                <FiDownload className=\"text-xl\" />\n                <span>Fetch Users from DHIS2</span>\n              </button>\n            </div>\n            {/* Rest of Export Tab remains unchanged for brevity, apply similar styling */}\n          </div>\n\n          {/* Help Modal */}\n          {showHelp && (\n            <div className=\"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50\" role=\"dialog\" aria-labelledby=\"help-title\">\n              <div className={`p-6 rounded-xl bg-white dark:bg-gray-800 shadow-2xl w-full max-w-md ${theme === 'dark' ? 'border border-gray-700' : 'border border-gray-200'}`}>\n                <h2 id=\"help-title\" className=\"text-2xl font-bold text-gray-900 dark:text-white mb-4\">Help</h2>\n                <p className=\"mb-4 text-gray-700 dark:text-gray-300\">\n                  The DHIS2 User Manager allows you to import and export user data in JSON or CSV formats.\n                  Upload a file to import users, or fetch and filter users from the DHIS2 server for export.\n                  For more details, visit the <a href=\"https://docs.dhis2.org\" className=\"text-blue-600 dark:text-blue-400 hover:underline\">DHIS2 documentation</a>.\n                </p>\n                <button \n                  onClick={() => setShowHelp(false)}\n                  className=\"w-full bg-gradient-to-r from-blue-500 to-blue-700 text-white px-6 py-3 rounded-lg hover:from-blue-600 hover:to-blue-800 transition-all duration-300 shadow-md\"\n                  aria-label=\"Close help modal\"\n                >\n                  Close\n                </button>\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}